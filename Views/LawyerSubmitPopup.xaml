<?xml version="1.0" encoding="utf-8" ?>
<mopups:PopupPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
                  xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
                  xmlns:vm="clr-namespace:Vakilaw.ViewModels"
                  xmlns:mopups="clr-namespace:Mopups.Pages;assembly=Mopups"
                  xmlns:conv="clr-namespace:Vakilaw.Converters"
                  x:Class="Vakilaw.Views.LawyerSubmitPopup"
                  BackgroundColor="#80000000" FlowDirection="RightToLeft">

    <ContentView VerticalOptions="Center" HorizontalOptions="Center">
        <Border StrokeShape="20" Padding="25" BackgroundColor="#003049" WidthRequest="320">
            <VerticalStackLayout Spacing="15">

                <Label Text="⚖️ ثبت نام وکیل ⚖️" FontSize="22" FontAttributes="Bold" HorizontalOptions="Center"/>

                <Entry Placeholder="نام و نام خانوادگی" PlaceholderColor="DarkGray"
                       Text="{Binding FullName}" />

                <Entry Placeholder="شماره موبایل" PlaceholderColor="DarkGray"
                       Keyboard="Telephone"
                       Text="{Binding PhoneNumber}" />

                <Entry Placeholder="شماره پروانه" PlaceholderColor="DarkGray"
                       Keyboard="Numeric"
                       Text="{Binding LicenseNumber}" />

                <Button Text="{Binding CanResendOtp, Converter={StaticResource OtpButtonTextConverter}, ConverterParameter={Binding ResendOtpCountdown}}"
                        Command="{Binding SendOtpCommand}"
                        IsEnabled="{Binding CanResendOtp}"
                        BackgroundColor="#007AFF"
                        TextColor="White"
                        CornerRadius="10" />

                <Entry Placeholder="کد تایید"
                       Keyboard="Numeric"
                       Text="{Binding EnteredOtp}" 
                       IsVisible="{Binding IsOtpSent}" />

                <Button Text="تایید کد"
                        Command="{Binding VerifyOtpCommand}"
                        IsVisible="{Binding IsOtpSent}"
                        BackgroundColor="#34C759"
                        TextColor="White"
                        CornerRadius="10" />

                <Label Text="{Binding TrialEndDate, StringFormat='تاریخ پایان Trial: {0:yyyy/MM/dd}'}"
                       IsVisible="{Binding IsTrialActive}"
                       TextColor="Green"
                       FontAttributes="Bold"
                       HorizontalOptions="Center" />

                <Button Text="انصراف"
                        BackgroundColor="#FF3B30"
                        TextColor="White"
                        CornerRadius="10"
                        Command="{Binding ClosePopupCommand}" />

            </VerticalStackLayout>
        </Border>
    </ContentView>
</mopups:PopupPage>