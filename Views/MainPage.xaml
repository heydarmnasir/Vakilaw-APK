<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             x:Class="Vakilaw.Views.MainPage"
             BackgroundImageSource="bg_main.jpg" FlowDirection="RightToLeft">

    <Shell.TitleView>
        <VerticalStackLayout>
            <Grid Padding="10" ColumnDefinitions="auto,auto">
                <Label Text="⚖️ Vakilaw" Grid.Column="0" Margin="0,0,0,0" TextColor="White" FontFamily="OpenSansSemibold" FontSize="18" FontAttributes="Bold"/>
                <ImageButton Source="account.png" IsEnabled="{Binding CanRegisterLawyer}" Command="{Binding OpenLawyerPopupCommand}" Grid.Column="1" HeightRequest="1" WidthRequest="0" HorizontalOptions="End"  Margin="225,0,0,0"/>
                <Label Text="ثبت نام وکیل" IsVisible="{Binding ShowRegisterLabel}" FontFamily="IRANSansWeb" TextColor="Gold" FontAttributes="Bold" Grid.Column="1" HorizontalOptions="End" Margin="0,10,55,0"/>
            </Grid>
        </VerticalStackLayout>
    </Shell.TitleView>

    <Grid RowDefinitions="*,Auto">
        <Grid x:Name="ContentArea" Grid.Row="0">
            <Grid HeightRequest="90"
             VerticalOptions="Start">

                <!-- گرادیان آبی -->
                <Grid.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                        <GradientStop Color="#003049" Offset="0.0"/>
                        <GradientStop Color="#003049" Offset="0.7"/>
                        
                        <!-- محو شدن به سفید -->
                    </LinearGradientBrush>
                </Grid.Background>

                <!--موج سفید (تصویر PNG نیم‌شفاف)-->
                <Image Source="mainheader.png"
                Aspect="Fill"
                VerticalOptions="End"
                
                />

                <!-- دکمه و متن‌ها -->
                <Grid Padding="15"
                     ColumnDefinitions="Auto,*"
                     VerticalOptions="Start">
                    <Image Source="icon_back.png"
                     WidthRequest="22"
                     HeightRequest="22"
                     VerticalOptions="Center"
                     HorizontalOptions="Start"/>
                </Grid>

                <StackLayout         
                        Padding="20,0,0,0" FlowDirection="RightToLeft">
                    <Label Text="{Binding LawyerFullName}" FlowDirection="RightToLeft"
                             FontFamily="Sahel" FontSize="16"
                             FontAttributes="Bold"
                             TextColor="White"
                             />
                    <HorizontalStackLayout>
                        <Label Text="وکیل پایه یک دادگستری - شماره پروانه: " IsVisible="{Binding LawyerLicensevisibility}" FontFamily="IRANSansWeb" FontSize="11" TextColor="White" Opacity="0.8"/>
                        <Label Text="{Binding LawyerLicense}" FontFamily="IRANSansWeb" FontSize="11" TextColor="White" Opacity="0.8"/>
                    </HorizontalStackLayout>
                </StackLayout>
            </Grid>

            <!-- محتوای اصلی -->
            <StackLayout Grid.Row="1"
             Padding="20,10"
             Spacing="15" Margin="0,125">

                <!-- کارت‌ها -->
                <Frame CornerRadius="12"
                    HasShadow="True"
                    Padding="15"
                    BackgroundColor="#003049">
                    <Grid ColumnDefinitions="Auto,*">
                        <Image Source="consult.png"
                        WidthRequest="28"
                        HeightRequest="28"
                        VerticalOptions="Center"/>
                        <Label Text="مشاهده درخواست های مشاوره از مردم"
                         FontSize="16"
                         VerticalOptions="Center"
                         Grid.Column="1"
                         Margin="10,0,0,0"/>
                    </Grid>
                </Frame>

                <Frame CornerRadius="12" IsEnabled="{Binding IsLawyer}"
                    HasShadow="True"
                    Padding="15"
                    BackgroundColor="#003049">
                    <Grid ColumnDefinitions="Auto,*">
                        <Image Source="clients.png"
                        WidthRequest="28"
                        HeightRequest="28"
                        VerticalOptions="Center"/>
                        <Label Text="مدیریت موکل‌ ها و پرونده ها"
                        FontSize="16"
                        VerticalOptions="Center"
                        Grid.Column="1"
                        Margin="10,0,0,0"/>
                    </Grid>
                </Frame>

                <Frame CornerRadius="12" IsEnabled="{Binding IsLawyer}"
                    HasShadow="True"
                    Padding="15"
                    BackgroundColor="#003049">
                    <Grid ColumnDefinitions="Auto,*">
                        <Image Source="contracts.png"
                         WidthRequest="28"
                         HeightRequest="28"
                         VerticalOptions="Center"/>
                        <Label Text="مدیریت قراردادها، لوایح و دادخواست ها"
                        FontSize="16"
                        VerticalOptions="Center"
                        Grid.Column="1"
                        Margin="10,0,0,0"/>
                    </Grid>
                </Frame>

                <Frame CornerRadius="12" 
                     HasShadow="True"
                     Padding="15"
                     BackgroundColor="#003049">
                    <Grid ColumnDefinitions="Auto,*">
                        <Image Source="lawbank.png"
                   WidthRequest="28"
                   HeightRequest="28"
                   VerticalOptions="Center"/>
                        <Label Text="بانک قوانین حقوقی"
                   FontSize="16"
                   VerticalOptions="Center"
                   Grid.Column="1"
                   Margin="10,0,0,0"/>
                    </Grid>
                </Frame>

                <Frame CornerRadius="12" IsEnabled="{Binding IsLawyer}"
                HasShadow="True"
                Padding="15"
                BackgroundColor="#003049">
                    <Grid ColumnDefinitions="Auto,*">
                        <Image Source="sms.png"
                         WidthRequest="28"
                         HeightRequest="28"
                         VerticalOptions="Center"/>
                        <Label Text="ارسال پیامک تکی و گروهی"
                         FontSize="16"
                         VerticalOptions="Center"
                         Grid.Column="1"
                         Margin="10,0,0,0"/>
                    </Grid>
                </Frame>

                <Frame CornerRadius="12" IsEnabled="{Binding IsLawyer}"
                HasShadow="True"
                Padding="15"
                BackgroundColor="#003049">
                    <Grid ColumnDefinitions="Auto,*">
                        <Image Source="financial_management.png"
                         WidthRequest="28"
                         HeightRequest="28"
                         VerticalOptions="Center"/>
                        <Label Text="مدیریت مالی و حسابداری"
                         FontSize="16"
                         VerticalOptions="Center"
                         Grid.Column="1"
                         Margin="10,0,0,0"/>
                    </Grid>
                </Frame>

                <Frame CornerRadius="12" IsEnabled="{Binding IsLawyer}"
                HasShadow="True"
                Padding="15"
                BackgroundColor="#003049">
                    <Grid ColumnDefinitions="Auto,*">
                        <Image Source="reports.png"
                        WidthRequest="28"
                        HeightRequest="28"
                        VerticalOptions="Center"/>
                        <Label Text="گزارش ها"
                         FontSize="16"
                         VerticalOptions="Center"
                         Grid.Column="1"
                         Margin="10,0,0,0"/>
                    </Grid>
                </Frame>
            </StackLayout>
        </Grid>
        
        <!-- نوار پایین -->
        <Grid Grid.Row="1"
              BackgroundColor="#1c1c1c"
              HeightRequest="70"
              ColumnDefinitions="*,*,*,*,*">

            <!-- خانه -->
            <VerticalStackLayout Grid.Column="4" HorizontalOptions="Center" VerticalOptions="Center">
                <VerticalStackLayout.GestureRecognizers>
                    <TapGestureRecognizer Tapped="Home_Tapped" />
                </VerticalStackLayout.GestureRecognizers>
                <Image Source="home.png" WidthRequest="26"/>
                <Label Text="خانه" FontSize="12" Margin="10,0" TextColor="White"/>
            </VerticalStackLayout>

            <!-- سایت عدل ایران -->
            <VerticalStackLayout x:Name="adliran_bg" Grid.Column="1" HorizontalOptions="Center" VerticalOptions="Center">
                <VerticalStackLayout.GestureRecognizers>
                    <TapGestureRecognizer Tapped="AdlIran_Tapped" />
                </VerticalStackLayout.GestureRecognizers>
                <Image Source="adliran.png" WidthRequest="26"/>
                <Label Text="عدل ایران" FontSize="12" TextColor="White"/>
            </VerticalStackLayout>

            <!-- افزودن (وسط و بزرگتر) -->
            <Grid Grid.Column="2" HorizontalOptions="Center" VerticalOptions="Center">
                <Frame WidthRequest="65" HeightRequest="65"
                       CornerRadius="32"
                       BackgroundColor="#343a40"
                       HasShadow="True"
                       TranslationY="-15"
                       Padding="0">
                    <Image Source="add.png"
                           WidthRequest="30" HeightRequest="30"
                           VerticalOptions="Center"
                           HorizontalOptions="Center"/>
                </Frame>
            </Grid>

            <!-- یادآورها -->
            <VerticalStackLayout Grid.Column="3" HorizontalOptions="Center" VerticalOptions="Center">
                <Image Source="bookmark.png" WidthRequest="26"/>
                <Label Text="نشان ها" FontSize="12" TextColor="White"/>
            </VerticalStackLayout>

            <!-- تنظیمات -->
            <VerticalStackLayout Grid.Column="0" HorizontalOptions="Center" VerticalOptions="Center">
                <VerticalStackLayout.GestureRecognizers>
                    <TapGestureRecognizer Tapped="Settings_Tapped" />
                </VerticalStackLayout.GestureRecognizers>
                <Image Source="settings.png" WidthRequest="26"/>
                <Label Text="تنظیمات" FontSize="12" TextColor="White"/>
            </VerticalStackLayout>
        </Grid>

        <!-- پنل تنظیمات (اول مخفی) -->
        <Grid x:Name="SettingsPanel"
              BackgroundColor="WhiteSmoke"
              IsVisible="False"
              Padding="20">
            <StackLayout>
                <Label Text="تنظیمات" FontSize="20" />
                <Button Text="بستن"/>
            </StackLayout>
        </Grid>
    </Grid>
</ContentPage>